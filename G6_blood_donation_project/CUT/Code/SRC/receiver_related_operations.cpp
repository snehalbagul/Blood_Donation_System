/***************************************************************************************************************
 ** FUNCTION NAME   :    receiver_registration
 **
 **
 ** DESCRIPTION     :     
 **
 **
 ** RETURNS         :
 **
 **
 **************************************************************************************************************/

#include<iostream>
#include<iomanip>
#include<set>
#include<list>
#include<deque>
#include<mutex>
#include<string>
using namespace std;

/*_____________________________________________________________________________________________________________*/
/**************************************************************************************************************/

mutex accum_mutex;

int receiver::view_receiver_queue()
{

	if(q.empty())
	{
		system("clear");
		
		cout<<endl<<"____________________________________________________________________________________"<<endl;

		cout<<endl<<"************************************************************************************"<<endl;
		cout<<endl<<setw(25)<<"RECEIVER QUEUE IS EMPTY."<<endl;
		cout<<endl<<"____________________________________________________________________________________"<<endl;
		cout<<endl<<"************************************************************************************"<<endl;
		system("read a");
		system("clear");

		return EXIT_FAILURE;
	}
	system("clear");

	cout<<endl<<"____________________________________________________________________________________________";
	cout<<endl<<"********************************************************************************************";

	cout<<endl<<"                                  RECEIVER'S QUEUE";

	cout<<endl<<"********************************************************************************************"<<endl;
	cout<<setw(10)<<"AADHAR NUMBER"<<setw(15)<<"NAME"<<setw(18)<<"ADDRESS"<<setw(18)<<"AGE"<<setw(22)<<"DONOR_AADHAR_NUMBER"<<setw(20)<<endl;

	for(receiver it:q)
	{
		cout<<setw(10)<<it.aadhar_num<<setw(18)<<it.name<<setw(18)<<it.address<<setw(18)<<it.age<<setw(20)<<it.donor_aadhar_num<<setw(20)<<endl;
	}
	cout<<endl<<"____________________________________________________________________________________________"<<endl;

	system("read a");
	system("clear");
	return EXIT_SUCCESS;

}



/*________________________________________________________________________________________________________*/
/**********************************************************************************************************/


int receiver::carry_out_donation()
{

	receiver r;
	if(q.empty())
	{

		system("clear");
		
		cout<<endl<<"____________________________________________________________________________________"<<endl;

		cout<<endl<<"************************************************************************************"<<endl;
		cout<<endl<<setw(25)<<"RECEIVER QUEUE IS EMPTY."<<endl;
		cout<<endl<<"____________________________________________________________________________________"<<endl;
		cout<<endl<<"************************************************************************************"<<endl;
		system("read a");
		system("clear");

		return EXIT_FAILURE;
	}
	accum_mutex.lock();
	while(!q.empty())
	{
		r=q.front();
		rl.push_back(r);
		q.pop_front();
	}
	accum_mutex.unlock();

	system("clear");
	cout<<endl<<"____________________________________________________________________________________________";

	cout<<endl<<"____________________________________________________________________________________________"<<endl;


	cout<<endl<<"******************************DONATION PROCESS SUCCESSFULL**********************************"<<endl;
	cout<<endl<<"____________________________________________________________________________________________";
	cout<<endl<<"____________________________________________________________________________________________"<<endl;

	system("read a");
	system("clear");
	return EXIT_SUCCESS;
}




/*______________________________________________________________________________________________________________*/
/***************************************************************************************************************/


int receiver::remove_daily_transaction_file()
{
	system("clear");

	cout<<endl<<"____________________________________________________________________________________________"<<endl;

	cout<<endl<<"____________________________________________________________________________________________"<<endl;

	rl.clear();

	cout<<endl<<"*************************************FILE DELETED*******************************************"<<endl;
	cout<<endl<<"____________________________________________________________________________________________"<<endl;

	cout<<endl<<"____________________________________________________________________________________________"<<endl;
	system("read a");
	system("clear");
	return EXIT_SUCCESS;
}



/*_____________________________________________________________________________________________________________*/
/***************************************************************************************************************/

void receiver_registration()
{
	receiver r;

	accum_mutex.lock();
	if(r.get_receiver_data()==0)
	{
		q.push_back(r);
	}
	accum_mutex.unlock();
}

/*_____________________________________________________________________________________________________________*/
/***************************************************************************************************************/
